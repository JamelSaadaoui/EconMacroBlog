****

Andrea Carriero, Todd E. Clark, and Massimiliano Marcellino, "Specification Choices in Quantile Regression for Empirical Macroeconomics," Journal of Applied Econometrics, forthcoming.  Contact: tclarkresearch@gmail.com

This file details the data and computer programs used to produce the results in the published paper, with a focus on the applications with US data.  Programs for the advanced economy GDP growth applications are the same except for changes to deal with the data differences (source file, dates, predictor sets).  These advanced economy application files are available upon request to tclarkresearch@gmail.com.

Regarding replication and data, please note the following:  In this public distribution, the series on financial conditions from Goldman Sachs used in the paper's inflation application is proprietary, and we do not have permission to share.  To allow researchers to run the programs without the omitted series, for this distribution we revised the programs (relative to what we used for the paper's results) to substitute the Chicago Fed's NFCI for the GSFCI in the inflation application.  Note that this shortens the sample available for model estimation, which will have some impact on results compared to those in the paper.

In the case of QR-ridge and QR-lasso, the estimation of models and computation of quantile forecasts was conducted with programs in R.  These programs (written by Matthew Gordon in his role as research assistant) are contained in the folder "prog.RforQRridgeandQRlasso".  That folder includes a "data" folder from which the data were read into the R programs.  (These data files are derived from the main data files described below and provided separately in association with programs for estimation and forecasting with other models.) The underlying programs use selected R packages described in the program files of the folder.  (The substitution of the NFCI for the GSFCI in the inflation application may require some adjustment to the R programs -- in order to read the data over the appropriate sample -- to produce the inflation results.)

In the folder "prog.RforQRridgeandQRlasso" with R programs used for R-ridge and QR-lasso, the script RunArray.sh can be used to launch the program QR_Forecasts_Array.R to run everything at once for all applications and models (this takes a long time even with parallel computing).  [The program QR_Forecasts.R can be used to instead estimate models on a one at a time basis, using the switches in the program to dictate the application, quantile (tau), and horizon (h).] These programs call QR_TSCV_Grid_Search_v2.R to conduct the cross-validation exercises (quasi-real-time forecast evaluation) used to determine the ridge/lasso penalty parameter at each forecast origin.  With the basic files of forecasts stored in the folder "Intermediate_Parts", the program Assemble_Intermediate_Parts.R compiles forecasts across quantiles and horizons to put them in combined Excel files.

Programs in RATS were used in estimation and forecasting with all other models and in the compilations of results (including forecasts from the R-ridge and QR-lasso models obtained with R programs described above) into the paper's charts and tables.  The following notes describe the associated data and program files.

"data" folder:  Contains the data used in all of the paper's applications, in Excel files (variables in columns, dates in rows, with dates given in the first column).  The US applications pull data from the files currentdata.xlsx and vlargeGDPdata.xlsx.  The advanced economy GDP growth applications pull data from DataAE.xlsx; these data were sourced from the public files of Adrian, et al. (we just reorganized the structure of their files to be easier to pull data for our applications).

"procedures" folder:  Contains RATS procedures for estimation of BQR specifications (simple Minn prior, estimated Minn prior, horseshoe prior) and PQR model.  Also contains two utility functions used in some aspects of statistical inference.

"prog" folder:  Contains RATS programs used to produce the paper's results for five US applications. The programs BQR_Minn.prg, BQR_estMinn.prg, and BQR_HS.prg read in data, transform as needed, and loop over time (as well as quantiles and forecast horizons) to estimate the indicated models and form the associated quantile forecasts.  The quantile forecasts and scores used in the paper are written to .csv files.  QR.prg, QRavg.prg, PQR.prg do the same for the simple QR, QR-avg, and PQR specifications.  For subsequent processing, the .csv files should be located in the "out" folder.  In this same folder, the RATS program computeQSandCRPSforRquantileforecasts.prg reads in spreadsheets containing time series of quantile forecasts from the QR-ridge and QR-lasso specifications (produced using programs in R, not RATS), computes the quantile scores and CRPS scores used in the paper, and writes those results to new files for subsequent processing.  To produce results for subsequent processing, the baseline file needs to be copied with the application indicator appended to the end of the file name (before .prg).  For the US applications, these application indicators are as follows:  "_GDPsmall", "_GDPlarge", "_unemp", "_GDPvlarge", and "_headinflchg".  For example, to produce BQR-Minn forecasts for the large GDP application, copy BQR_Minn.prg to BQR_Minn_GDPlarge.prg, and make sure the "appno" indicator defined at the top of the program is set to 2.
For a given US application, once all forecast programs have been run to produce forecasts for QR, BQR-Minn, etc. (and .csv files of output moved to the "out" folder in "prog"), the program compileresults.prg can be used to produce tables of score ratios with statistical significance indicators.  The compileresults.prg program will read in from the "out" folder the time series of scores to compute the relevant time averages and ratios relative to the QR baseline, along with the results of Diebold-Mariano-West tests. Similarly, the plotquantiles.prg will read in from the "out" folder the time series of quantile forecasts and produce charts of these time series, as in the paper's Figure 2.  Once again, to run results with these programs, the baseline files need to be copied with the application indicator appended to the end of the file name (before .prg), and the "appno" indicator at the top of the file needs to be changed to correspond to the intended application. 

Once forecasts and scores have been run for all applications and models (including the advanced economy GDP growth applications), the program quantifyingcomparisons.prg can be used to read in all score results and produce the box-whisker chart in the paper along with the diffusion index results.

For a given US application, once all forecast programs have been run to produce forecasts for QR, BQR-Minn, etc. (and .csv files of output moved to the "out" folder in "prog"), the program MZtests.prg reads in the forecasts to compute the specification test of Fosten, et al.  Once again, to run results with this program, the baseline file needs to be copied with the application indicator appended to the end of the file name (before .prg), and the "appno" indicator at the top of the file needs to be changed to correspond to the intended application. 
